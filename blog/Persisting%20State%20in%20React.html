<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Ubuntu:ital,wght@0,400;0,500;0,700;1,700&display=swap"
      rel="stylesheet"
    />
    <title>Harry Chow Web</title>
    <script type="module" crossorigin src="/assets/index-DgGoiepB.js"></script>
    <link rel="stylesheet" crossorigin href="/assets/index-8HZMd-9w.css">
  </head>
  <body>
    <div id="app"><div class="relative"><nav class="flex justify-between py-3 px-7 text-[#9BA4B5]"><a href="/">Harry Chow</a><ul class="flex gap-4"><li><a href="/blog"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-notepad-text "><path d="M8 2v4"></path><path d="M12 2v4"></path><path d="M16 2v4"></path><rect width="16" height="18" x="4" y="4" rx="2"></rect><path d="M8 10h6"></path><path d="M8 14h8"></path><path d="M8 18h5"></path></svg></a></li><li><a href="/project"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-folder "><path d="M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"></path></svg></a></li><a class="" href="https://github.com/momingse"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-github "><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"></path><path d="M9 18c-4.51 2-5-2-7-2"></path></svg></a><a class="" href="https://www.linkedin.com/in/wang-hin-chow-5ab517271/"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-linkedin "><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect width="4" height="12" x="2" y="9"></rect><circle cx="4" cy="4" r="2"></circle></svg></a></ul></nav><div class="py-3 px-6 md:py-9"><div class="w-full"><div class="m-auto flex justify-center"><div class="hidden lg:block mr-2 w-40"></div><div id="blog" class="max-w-[666px]"><h1>Persisting State in React</h1>
<h2 id=Introduction>Introduction</h2><p>In page reloads or when the user navigates away from the page, the state of the application is lost. This is a common problem in web applications. In this article, we will discuss how to persist the state of a React application.</p>
<p>consider the following example:</p>
<pre><code class="language-js">import React, { useState } from &quot;react&quot;;

function App() {
  const [count, setCount] = useState(0);

  return (
    &lt;div&gt;
      &lt;p&gt;You clicked {count} times&lt;/p&gt;
      &lt;button onClick={() =&gt; setCount(count + 1)}&gt;Click me&lt;/button&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<h2 id=1.%20Local%20Storage>1. Local Storage</h2><p>Local storage is a simple way to persist the state of a React application. It is a key-value pair storage that is available in the browser. The data stored in local storage is available even after the browser is closed.</p>
<pre><code class="language-js">import React, { useState, useEffect } from &quot;react&quot;;

const usePersistedState = (key, defaultValue) =&gt; {
  const [state, setState] = useState(() =&gt; {
    const persistedState = localStorage.getItem(key);
    return persistedState ? JSON.parse(persistedState) : defaultValue;
  });

  useEffect(() =&gt; {
    localStorage.setItem(key, JSON.stringify(state));
  }, [key, state]);

  return [state, setState];
};

function App() {
  const [count, setCount] = usePersistedState(&quot;count&quot;, 0);

  return (
    &lt;div&gt;
      &lt;p&gt;You clicked {count} times&lt;/p&gt;
      &lt;button onClick={() =&gt; setCount(count + 1)}&gt;Click me&lt;/button&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<p>Advantages:</p>
<ul>
<li>Simple to use</li>
<li>Data is available even after the browser is closed</li>
</ul>
<p>Disadvantages:</p>
<ul>
<li>Data is available to all the tabs in the browser</li>
<li>Data is not available in the server-side rendering</li>
<li>Data is not available in the incognito mode</li>
<li>Data may be storage limited</li>
</ul>
<h2 id=2.%20URL%20Parameters>2. URL Parameters</h2><p>URL parameters are another way to persist the state of a React application. The URL parameters are part of the URL and are available in the browser history.</p>
<pre><code class="language-js">import React, { useState, useEffect } from &quot;react&quot;;
import { useLocation, useHistory } from &quot;react-router-dom&quot;;

const usePersistedState = (key, defaultValue) =&gt; {
  const query = new URLSearchParams(useLocation().search);
  const history = useHistory();
  const [state, setState] = useState(() =&gt; {
    const persistedState = query.get(key);
    return persistedState ? JSON.parse(persistedState) : defaultValue;
  });

  useEffect(() =&gt; {
    query.set(key, JSON.stringify(state));
    history.push({ search: query.toString() });
  }, [key, state, query, history]);

  return [state, setState];
};

function App() {
  const history = useHistory();
  const [count, setCount] = usePersistedState(&quot;count&quot;, 0);

  return (
    &lt;div&gt;
      &lt;p&gt;You clicked {count} times&lt;/p&gt;
      &lt;button onClick={() =&gt; setCount(count + 1)}&gt;Click me&lt;/button&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<p>Advantages:</p>
<ul>
<li>Data is available in the browser history</li>
<li>Data is available in the server-side rendering</li>
</ul>
<p>Disadvantages:</p>
<ul>
<li>The URL may become long and complex</li>
</ul>
</div><div class="hidden lg:block ml-2 w-40 border-zinc-50"><div class="sticky top-10 text-sm text-zinc-600 flex"><div class="h-6 border border-sky-500 absolute" style="border-width:1px;top:0px;transition:top 0.2s"></div><div><div class="cursor-pointer pl-3 pb-1">Introduction</div><div class="cursor-pointer pl-3 pb-1">1. Local Storage</div><div class="cursor-pointer pl-3 pb-1">2. URL Parameters</div></div></div></div></div></div></div></div></div>
  </body>
</html>
